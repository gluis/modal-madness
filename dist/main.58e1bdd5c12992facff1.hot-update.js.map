{"version":3,"sources":["webpack:///./src/js/modal-madness.js"],"names":["mobileFunctions","require","MM","modalLinks","simpleLinks","collectModals","document","querySelectorAll","getAdjacentLinks","currentLinkSrc","prevLink","nextLink","currentIndex","findIndex","l","href","length","modalMadness","forEach","link","modalLink","getAttribute","push","addEventListener","e","preventDefault","title","populateModal","adjustModalHeight","modalImage","isMobile","windowHeight","window","innerHeight","modalImageHeight","height","modalImageWidth","width","modalContent","querySelector","modalContentHeight","offsetHeight","modalPrev","modalNext","targetHeight","targetWidth","style","top","left","right","src","handlePopulateModal","evt","imageSrc","titleText","console","log","clearModal","modalWindow","modalText","classList","add","alt","innerHTML","populateAdjacentLinks","prevLinkSrc","prevLinkTitle","nextLinkSrc","nextLinkTitle","closeModal","modalClose","remove","modalInit","module","exports"],"mappings":";;;;;;;;;AAAA,IAAMA,eAAe,GAAGC,mBAAO,CAAC,2DAAD,CAA/B;;AAEA,IAAMC,EAAE,GAAG;AAELC,YAAU,EAAE,EAFP;AAEW;AAChBC,aAAW,EAAE,EAHR;AAGY;AAEjBC,eAAa,EAAE,yBAAM;AACnBH,MAAE,CAACC,UAAH,GAAgBG,QAAQ,CAACC,gBAAT,CAA0B,aAA1B,CAAhB;AACD,GAPI;AASLC,kBAAgB,EAAE,0BAACC,cAAD,EAAoB;AACpC,QAAIC,QAAJ,EAAcC,QAAd,EAAwBC,YAAxB;AACAA,gBAAY,GAAGV,EAAE,CAACE,WAAH,CAAeS,SAAf,CAAyB,UAAAC,CAAC,EAAI;AAAE,aAAOA,CAAC,CAACC,IAAF,KAAWN,cAAlB;AAAkC,KAAlE,CAAf;AACAC,YAAQ,GAAIE,YAAY,GAAG,CAAhB,GAAqB,CAAC,CAAtB,GAA0BV,EAAE,CAACE,WAAH,CAAeQ,YAAY,GAAG,CAA9B,CAA1B,GAA6D,KAAxE;AACAD,YAAQ,GAAIC,YAAY,GAAG,CAAhB,GAAqBV,EAAE,CAACE,WAAH,CAAeY,MAApC,GAA6Cd,EAAE,CAACE,WAAH,CAAeQ,YAAY,GAAG,CAA9B,CAA7C,GAAgF,KAA3F,CAJoC,CAMpC;AACD,GAhBI;AAkBLK,cAAY,EAAE,wBAAM;AAClBf,MAAE,CAACG,aAAH;AACAH,MAAE,CAACC,UAAH,CAAce,OAAd,CAAsB,UAAAC,IAAI,EAAI;AAC5B,UAAMC,SAAS,GAAG;AAAC,gBAAQD,IAAI,CAACJ,IAAd;AAAoB,iBAASI,IAAI,CAACE,YAAL,CAAkB,YAAlB;AAA7B,OAAlB;AACAnB,QAAE,CAACE,WAAH,CAAekB,IAAf,CAAoBF,SAApB;AAEAD,UAAI,CAACI,gBAAL,CAAsB,OAAtB,EAA+B,UAAAC,CAAC,EAAI;AAClCA,SAAC,CAACC,cAAF;AACA,YAAMC,KAAK,GAAGN,SAAS,CAACM,KAAxB;AACA,YAAMX,IAAI,GAAGK,SAAS,CAACL,IAAvB;AACAb,UAAE,CAACyB,aAAH,CAAiBZ,IAAjB,EAAuBW,KAAvB;AACD,OALD,EAKG,KALH;AAMD,KAVD,EAFkB,CAalB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,GAzCI;AA2CL;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAE,mBAAiB,EAAE,2BAACC,UAAD,EAAgB;AACjC,QAAI,CAAC7B,eAAe,CAAC8B,QAAhB,EAAL,EAAiC;AAC/B,UAAMC,YAAY,GAAGC,MAAM,CAACC,WAA5B;AACA,UAAMC,gBAAgB,GAAGL,UAAU,CAACM,MAApC;AACA,UAAMC,eAAe,GAAGP,UAAU,CAACQ,KAAnC;AACA,UAAMC,YAAY,GAAGhC,QAAQ,CAACiC,aAAT,CAAuB,gBAAvB,CAArB;AACA,UAAMC,kBAAkB,GAAGF,YAAY,CAACG,YAAxC;AACA,UAAMC,SAAS,GAAGpC,QAAQ,CAACiC,aAAT,CAAuB,aAAvB,CAAlB;AACA,UAAMI,SAAS,GAAGrC,QAAQ,CAACiC,aAAT,CAAuB,aAAvB,CAAlB;;AAEA,UAAIC,kBAAkB,GAAGT,YAAzB,EAAuC;AACrC,YAAMa,YAAY,GAAGb,YAAY,GAAG,EAApC;AACA,YAAMc,WAAW,GAAID,YAAY,GAACV,gBAAd,GAAkCE,eAAtD;AAEAP,kBAAU,CAACiB,KAAX,CAAiBX,MAAjB,GAA0B,MAA1B;AACAN,kBAAU,CAACiB,KAAX,CAAiBT,KAAjB,GAAyB,MAAzB;AAEAR,kBAAU,CAACiB,KAAX,CAAiBX,MAAjB,GAA0BS,YAAY,GAAG,IAAzC;AACAf,kBAAU,CAACiB,KAAX,CAAiBT,KAAjB,GAAyBQ,WAAW,GAAG,IAAvC;AAEAH,iBAAS,CAACI,KAAV,CAAgBC,GAAhB,GAAsBH,YAAY,GAAC,CAAb,GAAiB,IAAvC;AACAD,iBAAS,CAACG,KAAV,CAAgBC,GAAhB,GAAsBH,YAAY,GAAC,CAAb,GAAiB,IAAvC;AACD,OAZD,MAYO;AACLf,kBAAU,CAACiB,KAAX,CAAiBX,MAAjB,GAA0B,MAA1B;AACAN,kBAAU,CAACiB,KAAX,CAAiBT,KAAjB,GAAyB,MAAzB;AACAK,iBAAS,CAACI,KAAV,CAAgBC,GAAhB,GAAsBP,kBAAkB,GAAC,CAAnB,GAAuB,IAA7C;AACAG,iBAAS,CAACG,KAAV,CAAgBC,GAAhB,GAAsBP,kBAAkB,GAAC,CAAnB,GAAuB,IAA7C;AACD;;AACDE,eAAS,CAACI,KAAV,CAAgBE,IAAhB,GAAuB,MAAvB;AACAL,eAAS,CAACG,KAAV,CAAgBG,KAAhB,GAAwB,MAAxB;AAEA/C,QAAE,CAACM,gBAAH,CAAoBqB,UAAU,CAACqB,GAA/B;AAED,KAhCD,MAgCO;AACL,UAAMR,UAAS,GAAGpC,QAAQ,CAACiC,aAAT,CAAuB,aAAvB,CAAlB;;AACA,UAAMI,UAAS,GAAGrC,QAAQ,CAACiC,aAAT,CAAuB,aAAvB,CAAlB;;AACAG,gBAAS,CAACI,KAAV,CAAgBC,GAAhB,GAAsB,QAAtB;AACAJ,gBAAS,CAACG,KAAV,CAAgBC,GAAhB,GAAsB,QAAtB;AACAlB,gBAAU,CAACiB,KAAX,CAAiBT,KAAjB,GAAyB,MAAzB,CALK,CAML;AACD;AACF,GAzGI;AA2GLc,qBAAmB,EAAE,6BAACC,GAAD,EAAMF,GAAN,EAAWxB,KAAX,EAAqB;AACxC0B,OAAG,CAAC3B,cAAJ;AACAvB,MAAE,CAACyB,aAAH,CAAiBuB,GAAjB,EAAsBxB,KAAtB;AACD,GA9GI;AAgHLC,eAAa,EAAE,uBAAC0B,QAAD,EAAWC,SAAX,EAAyB;AACtCC,WAAO,CAACC,GAAR,CAAY,eAAZ;AACAtD,MAAE,CAACuD,UAAH;AACA,QAAMC,WAAW,GAAGpD,QAAQ,CAACiC,aAAT,CAAuB,eAAvB,CAApB;AACA,QAAMV,UAAU,GAAGvB,QAAQ,CAACiC,aAAT,CAAuB,cAAvB,CAAnB;AACA,QAAMoB,SAAS,GAAGrD,QAAQ,CAACiC,aAAT,CAAuB,aAAvB,CAAlB;AAEAmB,eAAW,CAACE,SAAZ,CAAsBC,GAAtB,CAA0B,QAA1B;AACAhC,cAAU,CAACqB,GAAX,GAAiBG,QAAjB;AACAxB,cAAU,CAACiC,GAAX,GAAiBR,SAAjB;AACAK,aAAS,CAACI,SAAV,GAAsBT,SAAtB;AACEC,WAAO,CAACC,GAAR,CAAY,4BAAZ;AACAtD,MAAE,CAAC0B,iBAAH,CAAqBC,UAArB;AAEFA,cAAU,CAACN,gBAAX,CAA4B,MAA5B,EAAoC,UAACC,CAAD,EAAO;AACzCA,OAAC,CAACC,cAAF,GADyC,CAEzC;AACA;AACD,KAJD;AAKD,GAnII;AAqILuC,uBAAqB,EAAE,+BAACtD,QAAD,EAAWC,QAAX,EAAwB;AACzC4C,WAAO,CAACC,GAAR,CAAY,8BAAZ;AAEJ,QAAMd,SAAS,GAAGpC,QAAQ,CAACiC,aAAT,CAAuB,aAAvB,CAAlB;AACA,QAAMI,SAAS,GAAGrC,QAAQ,CAACiC,aAAT,CAAuB,aAAvB,CAAlB;;AACA,QAAI7B,QAAJ,EAAc;AACZ,UAAMuD,WAAW,GAAGvD,QAAQ,CAACK,IAA7B;AACA,UAAMmD,aAAa,GAAGxD,QAAQ,CAACgB,KAA/B;AACAgB,eAAS,CAACnB,gBAAV,CAA2B,OAA3B,EAAoC,UAAAC,CAAC,EAAI;AACvCA,SAAC,CAACC,cAAF;AACAvB,UAAE,CAACyB,aAAH,CAAiBsC,WAAjB,EAA8BC,aAA9B;AACD,OAHD,EAGG,KAHH;AAID,KAPD,MAOO;AACLxB,eAAS,CAACI,KAAV,CAAgBC,GAAhB,GAAsB,QAAtB;AACD;;AACD,QAAIpC,QAAJ,EAAc;AACZ,UAAMwD,WAAW,GAAGxD,QAAQ,CAACI,IAA7B;AACA,UAAMqD,aAAa,GAAGzD,QAAQ,CAACe,KAA/B;AACAiB,eAAS,CAACpB,gBAAV,CAA2B,OAA3B,EAAoC,UAAAC,CAAC,EAAI;AACvCA,SAAC,CAACC,cAAF,GADuC,CAEvC;;AACAvB,UAAE,CAACyB,aAAH,CAAiBwC,WAAjB,EAA8BC,aAA9B;AACD,OAJD,EAIG,KAJH;AAKD,KARD,MAQO;AACLzB,eAAS,CAACG,KAAV,CAAgBC,GAAhB,GAAsB,QAAtB;AACD;AACF,GA/JI;AAiKLU,YAAU,EAAE,sBAAM;AAChB,QAAM5B,UAAU,GAAGvB,QAAQ,CAACiC,aAAT,CAAuB,cAAvB,CAAnB;AACA,QAAMoB,SAAS,GAAGrD,QAAQ,CAACiC,aAAT,CAAuB,aAAvB,CAAlB,CAFgB,CAGhB;AACA;;AACAV,cAAU,CAACiC,GAAX,GAAiB,EAAjB;AACAjC,cAAU,CAACqB,GAAX,GAAiB,EAAjB;AACAS,aAAS,CAACI,SAAV,GAAsB,EAAtB;AACAlC,cAAU,CAACiB,KAAX,GAAmB,EAAnB;AACD,GA1KI;AA4KLuB,YAAU,EAAE,sBAAM;AAChB,QAAMX,WAAW,GAAGpD,QAAQ,CAACiC,aAAT,CAAuB,eAAvB,CAApB;AACA,QAAM+B,UAAU,GAAGhE,QAAQ,CAACiC,aAAT,CAAuB,cAAvB,CAAnB;;AACA,QAAI+B,UAAJ,EAAgB;AACdA,gBAAU,CAAC/C,gBAAX,CAA4B,OAA5B,EAAqC,UAAAC,CAAC,EAAI;AACxCA,SAAC,CAACC,cAAF;AACAiC,mBAAW,CAACE,SAAZ,CAAsBW,MAAtB,CAA6B,QAA7B;AACArE,UAAE,CAACuD,UAAH;AACD,OAJD;AAKD;AACF,GAtLI;AAwLLe,WAAS,EAAE,qBAAM;AACftE,MAAE,CAACe,YAAH;AACAf,MAAE,CAACmE,UAAH;AACD,GA3LI,CA8LL;AACA;AACA;AACA;AACA;AACA;AACF;;AApMO,CAAX;AAwMAI,MAAM,CAACC,OAAP,GAAiBxE,EAAjB,C","file":"main.58e1bdd5c12992facff1.hot-update.js","sourcesContent":["const mobileFunctions = require('./mobile-functions.js');\n\nconst MM = {\n\n      modalLinks: [], // Node list\n      simpleLinks: [], // Array\n\n      collectModals: () => {\n        MM.modalLinks = document.querySelectorAll(\".modal-link\");\n      },\n\n      getAdjacentLinks: (currentLinkSrc) => {\n        let prevLink, nextLink, currentIndex;\n        currentIndex = MM.simpleLinks.findIndex(l => { return l.href === currentLinkSrc });\n        prevLink = (currentIndex - 1) > -1 ? MM.simpleLinks[currentIndex - 1] : false;\n        nextLink = (currentIndex + 1) < MM.simpleLinks.length ? MM.simpleLinks[currentIndex + 1] : false;\n\n        // MM.populateAdjacentLinks(prevLink, nextLink);\n      },\n\n      modalMadness: () => {\n        MM.collectModals();\n        MM.modalLinks.forEach(link => {\n          const modalLink = {'href': link.href, 'title': link.getAttribute(\"data-title\")};\n          MM.simpleLinks.push(modalLink);\n          \n          link.addEventListener('click', e => {\n            e.preventDefault()\n            const title = modalLink.title\n            const href = modalLink.href;\n            MM.populateModal(href, title);\n          }, false)\n        });\n        // document.addEventListener('click', e => {\n        //   if (e.target.parentNode.classList.contains('modal-link')) {\n        //     e.preventDefault();\n        //     const a = e.target.parentNode;\n        //     const title = a.getAttribute(\"data-title\");\n        //     const href = a.href;\n        //     MM.populateModal(href, title);\n        //   }\n        // }, false);\n        // window.simpleLinks = MM.simpleLinks;\n      },\n\n      // adjustImageSizes: () => {\n      //   if (!mobileFunctions.isMobile()) {\n      //     const images = document.querySelectorAll('.slide-background img')\n\n      //     if (images.length > 0) {\n      //       images.forEach(i => {\n      //         const imageHeight = i.height;\n      //         const imageWidth = i.width;\n\n      //         const windowHeight = window.innerHeight;\n      //         if (imageHeight > windowHeight * .75) {\n      //           const targetHeight = windowHeight * .75;\n      //           const targetWidth = (targetHeight/imageHeight) * imageWidth;\n      //           i.style.height = targetHeight + \"px\";\n      //           i.style.width = targetWidth + \"px\";\n      //         }\n      //       });\n      //     }\n      //   }\n      // },\n\n      adjustModalHeight: (modalImage) => {\n        if (!mobileFunctions.isMobile()) {\n          const windowHeight = window.innerHeight;\n          const modalImageHeight = modalImage.height;\n          const modalImageWidth = modalImage.width;\n          const modalContent = document.querySelector(\"#modal-content\");\n          const modalContentHeight = modalContent.offsetHeight;\n          const modalPrev = document.querySelector(\"#modal-prev\");\n          const modalNext = document.querySelector(\"#modal-next\");\n\n          if (modalContentHeight > windowHeight) {\n            const targetHeight = windowHeight * .8;\n            const targetWidth = (targetHeight/modalImageHeight) * modalImageWidth;\n\n            modalImage.style.height = \"auto\";\n            modalImage.style.width = \"auto\";\n\n            modalImage.style.height = targetHeight + \"px\";\n            modalImage.style.width = targetWidth + \"px\";\n\n            modalPrev.style.top = targetHeight/2 + \"px\";\n            modalNext.style.top = targetHeight/2 + \"px\";\n          } else {            \n            modalImage.style.height = \"auto\";\n            modalImage.style.width = \"auto\";\n            modalPrev.style.top = modalContentHeight/2 + \"px\";\n            modalNext.style.top = modalContentHeight/2 + \"px\";\n          } \n          modalPrev.style.left = '16px';      \n          modalNext.style.right = '16px';      \n\n          MM.getAdjacentLinks(modalImage.src);\n\n        } else {\n          const modalPrev = document.querySelector(\"#modal-prev\");\n          const modalNext = document.querySelector(\"#modal-next\");\n          modalPrev.style.top = '-100px';\n          modalNext.style.top = '-100px';\n          modalImage.style.width = \"100%\";\n          // MM.getAdjacentLinks(modalImage.src);\n        }\n      },\n\n      handlePopulateModal: (evt, src, title) => {\n        evt.preventDefault();\n        MM.populateModal(src, title);\n      },\n\n      populateModal: (imageSrc, titleText) => {\n        console.log('populateModal');\n        MM.clearModal();\n        const modalWindow = document.querySelector('#modal-window');\n        const modalImage = document.querySelector('#modal-image');\n        const modalText = document.querySelector('#modal-text');\n\n        modalWindow.classList.add('active');\n        modalImage.src = imageSrc;\n        modalImage.alt = titleText;\n        modalText.innerHTML = titleText;\n          console.log('about to adjustModalHeight');\n          MM.adjustModalHeight(modalImage);\n\n        modalImage.addEventListener(\"load\", (e) => {\n          e.preventDefault();\n          // console.log('about to adjustModalHeight');\n          // MM.adjustModalHeight(modalImage);\n        });\n      },\n\n      populateAdjacentLinks: (prevLink, nextLink) => {\n            console.log('inside populateAdjacentLinks')\n\n        const modalPrev = document.querySelector(\"#modal-prev\");\n        const modalNext = document.querySelector(\"#modal-next\");\n        if (prevLink) {\n          const prevLinkSrc = prevLink.href;\n          const prevLinkTitle = prevLink.title;\n          modalPrev.addEventListener(\"click\", e => {\n            e.preventDefault();\n            MM.populateModal(prevLinkSrc, prevLinkTitle);\n          }, false);\n        } else {\n          modalPrev.style.top = \"-100px\";\n        }\n        if (nextLink) {\n          const nextLinkSrc = nextLink.href;\n          const nextLinkTitle = nextLink.title;\n          modalNext.addEventListener(\"click\", e => {\n            e.preventDefault();\n            // console.log('pop modal in next link')\n            MM.populateModal(nextLinkSrc, nextLinkTitle);\n          }, false);\n        } else {\n          modalNext.style.top = \"-100px\";\n        }\n      },\n\n      clearModal: () => {\n        const modalImage = document.querySelector('#modal-image');\n        const modalText = document.querySelector('#modal-text');\n        // const prevLink = document.querySelector(\"#modal-prev\");\n        // const nextLink = document.querySelector(\"#modal-next\");\n        modalImage.alt = \"\";\n        modalImage.src = \"\";\n        modalText.innerHTML = \"\";\n        modalImage.style = \"\";\n      },\n\n      closeModal: () => {\n        const modalWindow = document.querySelector(\"#modal-window\");\n        const modalClose = document.querySelector(\"#modal-close\");\n        if (modalClose) {\n          modalClose.addEventListener(\"click\", e => {\n            e.preventDefault();\n            modalWindow.classList.remove(\"active\");\n            MM.clearModal();\n          });\n        }\n      },\n\n      modalInit: () => {\n        MM.modalMadness();\n        MM.closeModal();\n      },\n\n\n      // ensure popup images shrink if window does\n      // watchResize: () => {\n      //   window.addEventListener('resize', () => {\n      //     MM.adjustImageSizes();\n      //   })\n      // }\n    // END POPUPS & GALLERIES\n}\n\n\nmodule.exports = MM;\n"],"sourceRoot":""}