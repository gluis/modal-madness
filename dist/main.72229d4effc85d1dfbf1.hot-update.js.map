{"version":3,"sources":["webpack:///./src/js/modal-madness.js"],"names":["mobileFunctions","require","MM","modalLinks","simpleLinks","collectModals","document","querySelectorAll","getAdjacentLinks","currentLinkSrc","prevLink","nextLink","currentIndex","findIndex","l","href","length","populateAdjacentLinks","modalMadness","forEach","link","modalLink","getAttribute","push","addEventListener","e","preventDefault","title","populateModal","adjustModalHeight","modalImage","isMobile","windowHeight","window","innerHeight","modalImageHeight","height","modalImageWidth","width","modalContent","querySelector","modalContentHeight","offsetHeight","modalPrev","modalNext","targetHeight","targetWidth","style","top","left","right","console","log","src","handlePopulateModal","evt","imageSrc","titleText","modalWindow","modalText","classList","add","alt","innerHTML","prevLinkSrc","prevLinkTitle","nextLinkSrc","nextLinkTitle","clearModal","closeModal","modalClose","remove","modalInit","module","exports"],"mappings":";;;;;;;;;AAAA,IAAMA,eAAe,GAAGC,mBAAO,CAAC,2DAAD,CAA/B;;AAEA,IAAMC,EAAE,GAAG;AAELC,YAAU,EAAE,EAFP;AAEW;AAChBC,aAAW,EAAE,EAHR;AAGY;AAEjBC,eAAa,EAAE,yBAAM;AACnBH,MAAE,CAACC,UAAH,GAAgBG,QAAQ,CAACC,gBAAT,CAA0B,aAA1B,CAAhB;AACD,GAPI;AASLC,kBAAgB,EAAE,0BAACC,cAAD,EAAoB;AACpC,QAAIC,QAAJ,EAAcC,QAAd,EAAwBC,YAAxB;AACAA,gBAAY,GAAGV,EAAE,CAACE,WAAH,CAAeS,SAAf,CAAyB,UAAAC,CAAC,EAAI;AAAE,aAAOA,CAAC,CAACC,IAAF,KAAWN,cAAlB;AAAkC,KAAlE,CAAf;AACAC,YAAQ,GAAIE,YAAY,GAAG,CAAhB,GAAqB,CAAC,CAAtB,GAA0BV,EAAE,CAACE,WAAH,CAAeQ,YAAY,GAAG,CAA9B,CAA1B,GAA6D,KAAxE;AACAD,YAAQ,GAAIC,YAAY,GAAG,CAAhB,GAAqBV,EAAE,CAACE,WAAH,CAAeY,MAApC,GAA6Cd,EAAE,CAACE,WAAH,CAAeQ,YAAY,GAAG,CAA9B,CAA7C,GAAgF,KAA3F;AAEAV,MAAE,CAACe,qBAAH,CAAyBP,QAAzB,EAAmCC,QAAnC;AACD,GAhBI;AAkBLO,cAAY,EAAE,wBAAM;AAClBhB,MAAE,CAACG,aAAH;AACAH,MAAE,CAACC,UAAH,CAAcgB,OAAd,CAAsB,UAAAC,IAAI,EAAI;AAC5B,UAAMC,SAAS,GAAG;AAAC,gBAAQD,IAAI,CAACL,IAAd;AAAoB,iBAASK,IAAI,CAACE,YAAL,CAAkB,YAAlB;AAA7B,OAAlB;AACApB,QAAE,CAACE,WAAH,CAAemB,IAAf,CAAoBF,SAApB;AAEAD,UAAI,CAACI,gBAAL,CAAsB,OAAtB,EAA+B,UAAAC,CAAC,EAAI;AAClCA,SAAC,CAACC,cAAF;AACA,YAAMC,KAAK,GAAGN,SAAS,CAACM,KAAxB;AACA,YAAMZ,IAAI,GAAGM,SAAS,CAACN,IAAvB;AACAb,UAAE,CAAC0B,aAAH,CAAiBb,IAAjB,EAAuBY,KAAvB;AACD,OALD,EAKG,KALH;AAMD,KAVD,EAFkB,CAalB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,GAzCI;AA2CL;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAE,mBAAiB,EAAE,2BAACC,UAAD,EAAgB;AACjC,QAAI,CAAC9B,eAAe,CAAC+B,QAAhB,EAAL,EAAiC;AAC/B,UAAMC,YAAY,GAAGC,MAAM,CAACC,WAA5B;AACA,UAAMC,gBAAgB,GAAGL,UAAU,CAACM,MAApC;AACA,UAAMC,eAAe,GAAGP,UAAU,CAACQ,KAAnC;AACA,UAAMC,YAAY,GAAGjC,QAAQ,CAACkC,aAAT,CAAuB,gBAAvB,CAArB;AACA,UAAMC,kBAAkB,GAAGF,YAAY,CAACG,YAAxC;AACA,UAAMC,SAAS,GAAGrC,QAAQ,CAACkC,aAAT,CAAuB,aAAvB,CAAlB;AACA,UAAMI,SAAS,GAAGtC,QAAQ,CAACkC,aAAT,CAAuB,aAAvB,CAAlB;;AAEA,UAAIC,kBAAkB,GAAGT,YAAzB,EAAuC;AACrC,YAAMa,YAAY,GAAGb,YAAY,GAAG,EAApC;AACA,YAAMc,WAAW,GAAID,YAAY,GAACV,gBAAd,GAAkCE,eAAtD;AAEAP,kBAAU,CAACiB,KAAX,CAAiBX,MAAjB,GAA0B,MAA1B;AACAN,kBAAU,CAACiB,KAAX,CAAiBT,KAAjB,GAAyB,MAAzB;AAEAR,kBAAU,CAACiB,KAAX,CAAiBX,MAAjB,GAA0BS,YAAY,GAAG,IAAzC;AACAf,kBAAU,CAACiB,KAAX,CAAiBT,KAAjB,GAAyBQ,WAAW,GAAG,IAAvC;AAEAH,iBAAS,CAACI,KAAV,CAAgBC,GAAhB,GAAsBH,YAAY,GAAC,CAAb,GAAiB,IAAvC;AACAD,iBAAS,CAACG,KAAV,CAAgBC,GAAhB,GAAsBH,YAAY,GAAC,CAAb,GAAiB,IAAvC;AACD,OAZD,MAYO;AACLf,kBAAU,CAACiB,KAAX,CAAiBX,MAAjB,GAA0B,MAA1B;AACAN,kBAAU,CAACiB,KAAX,CAAiBT,KAAjB,GAAyB,MAAzB;AACAK,iBAAS,CAACI,KAAV,CAAgBC,GAAhB,GAAsBP,kBAAkB,GAAC,CAAnB,GAAuB,IAA7C;AACAG,iBAAS,CAACG,KAAV,CAAgBC,GAAhB,GAAsBP,kBAAkB,GAAC,CAAnB,GAAuB,IAA7C;AACD;;AACDE,eAAS,CAACI,KAAV,CAAgBE,IAAhB,GAAuB,MAAvB;AACAL,eAAS,CAACG,KAAV,CAAgBG,KAAhB,GAAwB,MAAxB;AAEAC,aAAO,CAACC,GAAR,CAAY,gCAAZ;AACAlD,QAAE,CAACM,gBAAH,CAAoBsB,UAAU,CAACuB,GAA/B;AAED,KAjCD,MAiCO;AACL,UAAMV,UAAS,GAAGrC,QAAQ,CAACkC,aAAT,CAAuB,aAAvB,CAAlB;;AACA,UAAMI,UAAS,GAAGtC,QAAQ,CAACkC,aAAT,CAAuB,aAAvB,CAAlB;;AACAG,gBAAS,CAACI,KAAV,CAAgBC,GAAhB,GAAsB,QAAtB;AACAJ,gBAAS,CAACG,KAAV,CAAgBC,GAAhB,GAAsB,QAAtB;AACAlB,gBAAU,CAACiB,KAAX,CAAiBT,KAAjB,GAAyB,MAAzB,CALK,CAML;AACD;AACF,GA1GI;AA4GLgB,qBAAmB,EAAE,6BAACC,GAAD,EAAMF,GAAN,EAAW1B,KAAX,EAAqB;AACxC4B,OAAG,CAAC7B,cAAJ;AACAxB,MAAE,CAAC0B,aAAH,CAAiByB,GAAjB,EAAsB1B,KAAtB;AACD,GA/GI;AAiHLC,eAAa,EAAE,uBAAC4B,QAAD,EAAWC,SAAX,EAAyB;AACtC,QAAMC,WAAW,GAAGpD,QAAQ,CAACkC,aAAT,CAAuB,eAAvB,CAApB;AACA,QAAMV,UAAU,GAAGxB,QAAQ,CAACkC,aAAT,CAAuB,cAAvB,CAAnB;AACA,QAAMmB,SAAS,GAAGrD,QAAQ,CAACkC,aAAT,CAAuB,aAAvB,CAAlB;AAEAkB,eAAW,CAACE,SAAZ,CAAsBC,GAAtB,CAA0B,QAA1B;AACA/B,cAAU,CAACuB,GAAX,GAAiBG,QAAjB;AACA1B,cAAU,CAACgC,GAAX,GAAiBL,SAAjB;AACAE,aAAS,CAACI,SAAV,GAAsBN,SAAtB;AAEA3B,cAAU,CAACN,gBAAX,CAA4B,MAA5B,EAAoC,UAACC,CAAD,EAAO;AACzCA,OAAC,CAACC,cAAF;AACAxB,QAAE,CAAC2B,iBAAH,CAAqBC,UAArB;AACD,KAHD;AAID,GA/HI;AAiILb,uBAAqB,EAAE,+BAACP,QAAD,EAAWC,QAAX,EAAwB;AAE7C,QAAMgC,SAAS,GAAGrC,QAAQ,CAACkC,aAAT,CAAuB,aAAvB,CAAlB;AACA,QAAMI,SAAS,GAAGtC,QAAQ,CAACkC,aAAT,CAAuB,aAAvB,CAAlB,CAH6C,CAI7C;AACA;;AACA,QAAI9B,QAAJ,EAAc;AACZ,UAAMsD,WAAW,GAAGtD,QAAQ,CAACK,IAA7B;AACA,UAAMkD,aAAa,GAAGvD,QAAQ,CAACiB,KAA/B;AACAgB,eAAS,CAACnB,gBAAV,CAA2B,OAA3B,EAAoC,UAAAC,CAAC,EAAI;AACvCA,SAAC,CAACC,cAAF;AACAxB,UAAE,CAAC0B,aAAH,CAAiBoC,WAAjB,EAA8BC,aAA9B;AACD,OAHD,EAGG,KAHH,EAHY,CAOZ;AACD,KARD,MAQO;AACLtB,eAAS,CAACI,KAAV,CAAgBC,GAAhB,GAAsB,QAAtB;AACD;;AACD,QAAIrC,QAAJ,EAAc;AACZ,UAAMuD,WAAW,GAAGvD,QAAQ,CAACI,IAA7B;AACA,UAAMoD,aAAa,GAAGxD,QAAQ,CAACgB,KAA/B;AACAiB,eAAS,CAACpB,gBAAV,CAA2B,OAA3B,EAAoC,UAAAC,CAAC,EAAI;AACvCA,SAAC,CAACC,cAAF;AACAxB,UAAE,CAAC0B,aAAH,CAAiBsC,WAAjB,EAA8BC,aAA9B;AACD,OAHD,EAGG,KAHH,EAHY,CAOZ;AACD,KARD,MAQO;AACLvB,eAAS,CAACG,KAAV,CAAgBC,GAAhB,GAAsB,QAAtB;AACD;AACF,GA7JI;AA+JLoB,YAAU,EAAE,oBAACtC,UAAD,EAAa6B,SAAb,EAAwBjD,QAAxB,EAAkCC,QAAlC,EAA+C;AACzDmB,cAAU,CAACgC,GAAX,GAAiB,EAAjB;AACAhC,cAAU,CAACuB,GAAX,GAAiB,EAAjB;AACAM,aAAS,CAACI,SAAV,GAAsB,EAAtB;AACAjC,cAAU,CAACiB,KAAX,GAAmB,EAAnB,CAJyD,CAKzD;AACA;AACD,GAtKI;AAwKLsB,YAAU,EAAE,sBAAM;AAChB,QAAMX,WAAW,GAAGpD,QAAQ,CAACkC,aAAT,CAAuB,eAAvB,CAApB;AACA,QAAM8B,UAAU,GAAGhE,QAAQ,CAACkC,aAAT,CAAuB,cAAvB,CAAnB;AACA,QAAMV,UAAU,GAAGxB,QAAQ,CAACkC,aAAT,CAAuB,cAAvB,CAAnB;AACA,QAAMmB,SAAS,GAAGrD,QAAQ,CAACkC,aAAT,CAAuB,aAAvB,CAAlB;AACA,QAAM9B,QAAQ,GAAGJ,QAAQ,CAACkC,aAAT,CAAuB,aAAvB,CAAjB;AACA,QAAM7B,QAAQ,GAAGL,QAAQ,CAACkC,aAAT,CAAuB,aAAvB,CAAjB;;AACA,QAAI8B,UAAJ,EAAgB;AACdA,gBAAU,CAAC9C,gBAAX,CAA4B,OAA5B,EAAqC,UAAAC,CAAC,EAAI;AACxCA,SAAC,CAACC,cAAF;AACAgC,mBAAW,CAACE,SAAZ,CAAsBW,MAAtB,CAA6B,QAA7B;AACArE,UAAE,CAACkE,UAAH,CAActC,UAAd,EAA0B6B,SAA1B,EAAqCjD,QAArC,EAA+CC,QAA/C;AACD,OAJD;AAKD;AACF,GAtLI;AAwLL6D,WAAS,EAAE,qBAAM;AACftE,MAAE,CAACgB,YAAH;AACAhB,MAAE,CAACmE,UAAH;AACD,GA3LI,CA8LL;AACA;AACA;AACA;AACA;AACA;AACF;;AApMO,CAAX;AAwMAI,MAAM,CAACC,OAAP,GAAiBxE,EAAjB,C","file":"main.72229d4effc85d1dfbf1.hot-update.js","sourcesContent":["const mobileFunctions = require('./mobile-functions.js');\n\nconst MM = {\n\n      modalLinks: [], // Node list\n      simpleLinks: [], // Array\n\n      collectModals: () => {\n        MM.modalLinks = document.querySelectorAll(\".modal-link\");\n      },\n\n      getAdjacentLinks: (currentLinkSrc) => {\n        let prevLink, nextLink, currentIndex;\n        currentIndex = MM.simpleLinks.findIndex(l => { return l.href === currentLinkSrc });\n        prevLink = (currentIndex - 1) > -1 ? MM.simpleLinks[currentIndex - 1] : false;\n        nextLink = (currentIndex + 1) < MM.simpleLinks.length ? MM.simpleLinks[currentIndex + 1] : false;\n\n        MM.populateAdjacentLinks(prevLink, nextLink);\n      },\n\n      modalMadness: () => {\n        MM.collectModals();\n        MM.modalLinks.forEach(link => {\n          const modalLink = {'href': link.href, 'title': link.getAttribute(\"data-title\")};\n          MM.simpleLinks.push(modalLink);\n          \n          link.addEventListener('click', e => {\n            e.preventDefault()\n            const title = modalLink.title\n            const href = modalLink.href;\n            MM.populateModal(href, title);\n          }, false)\n        });\n        // document.addEventListener('click', e => {\n        //   if (e.target.parentNode.classList.contains('modal-link')) {\n        //     e.preventDefault();\n        //     const a = e.target.parentNode;\n        //     const title = a.getAttribute(\"data-title\");\n        //     const href = a.href;\n        //     MM.populateModal(href, title);\n        //   }\n        // }, false);\n        // window.simpleLinks = MM.simpleLinks;\n      },\n\n      // adjustImageSizes: () => {\n      //   if (!mobileFunctions.isMobile()) {\n      //     const images = document.querySelectorAll('.slide-background img')\n\n      //     if (images.length > 0) {\n      //       images.forEach(i => {\n      //         const imageHeight = i.height;\n      //         const imageWidth = i.width;\n\n      //         const windowHeight = window.innerHeight;\n      //         if (imageHeight > windowHeight * .75) {\n      //           const targetHeight = windowHeight * .75;\n      //           const targetWidth = (targetHeight/imageHeight) * imageWidth;\n      //           i.style.height = targetHeight + \"px\";\n      //           i.style.width = targetWidth + \"px\";\n      //         }\n      //       });\n      //     }\n      //   }\n      // },\n\n      adjustModalHeight: (modalImage) => {\n        if (!mobileFunctions.isMobile()) {\n          const windowHeight = window.innerHeight;\n          const modalImageHeight = modalImage.height;\n          const modalImageWidth = modalImage.width;\n          const modalContent = document.querySelector(\"#modal-content\");\n          const modalContentHeight = modalContent.offsetHeight;\n          const modalPrev = document.querySelector(\"#modal-prev\");\n          const modalNext = document.querySelector(\"#modal-next\");\n\n          if (modalContentHeight > windowHeight) {\n            const targetHeight = windowHeight * .8;\n            const targetWidth = (targetHeight/modalImageHeight) * modalImageWidth;\n\n            modalImage.style.height = \"auto\";\n            modalImage.style.width = \"auto\";\n\n            modalImage.style.height = targetHeight + \"px\";\n            modalImage.style.width = targetWidth + \"px\";\n\n            modalPrev.style.top = targetHeight/2 + \"px\";\n            modalNext.style.top = targetHeight/2 + \"px\";\n          } else {            \n            modalImage.style.height = \"auto\";\n            modalImage.style.width = \"auto\";\n            modalPrev.style.top = modalContentHeight/2 + \"px\";\n            modalNext.style.top = modalContentHeight/2 + \"px\";\n          } \n          modalPrev.style.left = '16px';      \n          modalNext.style.right = '16px';      \n\n          console.log('about to call getAdjacentLinks');\n          MM.getAdjacentLinks(modalImage.src);\n\n        } else {\n          const modalPrev = document.querySelector(\"#modal-prev\");\n          const modalNext = document.querySelector(\"#modal-next\");\n          modalPrev.style.top = '-100px';\n          modalNext.style.top = '-100px';\n          modalImage.style.width = \"100%\";\n          // MM.getAdjacentLinks(modalImage.src);\n        }\n      },\n\n      handlePopulateModal: (evt, src, title) => {\n        evt.preventDefault();\n        MM.populateModal(src, title);\n      },\n\n      populateModal: (imageSrc, titleText) => {\n        const modalWindow = document.querySelector('#modal-window');\n        const modalImage = document.querySelector('#modal-image');\n        const modalText = document.querySelector('#modal-text');\n\n        modalWindow.classList.add('active');\n        modalImage.src = imageSrc;\n        modalImage.alt = titleText;\n        modalText.innerHTML = titleText;\n\n        modalImage.addEventListener(\"load\", (e) => {\n          e.preventDefault();\n          MM.adjustModalHeight(modalImage);\n        });\n      },\n\n      populateAdjacentLinks: (prevLink, nextLink) => {\n        \n        const modalPrev = document.querySelector(\"#modal-prev\");\n        const modalNext = document.querySelector(\"#modal-next\");\n        // console.log('prevLink', prevLink)\n        // console.log('nextLink', nextLink)\n        if (prevLink) {\n          const prevLinkSrc = prevLink.href;\n          const prevLinkTitle = prevLink.title;\n          modalPrev.addEventListener(\"click\", e => {\n            e.preventDefault();\n            MM.populateModal(prevLinkSrc, prevLinkTitle);\n          }, false);\n          // modalPrev.addEventListener('click', MM.handlePopulateModal(event, prevLinkSrc, prevLinkTitle))\n        } else {\n          modalPrev.style.top = \"-100px\";\n        }\n        if (nextLink) {\n          const nextLinkSrc = nextLink.href;\n          const nextLinkTitle = nextLink.title;\n          modalNext.addEventListener(\"click\", e => {\n            e.preventDefault();\n            MM.populateModal(nextLinkSrc, nextLinkTitle);\n          }, false);\n          // modalNext.addEventListener('click', MM.handlePopulateModal(event, nextLinkSrc, nextLinkTitle))\n        } else {\n          modalNext.style.top = \"-100px\";\n        }\n      },\n\n      clearModal: (modalImage, modalText, prevLink, nextLink) => {\n        modalImage.alt = \"\";\n        modalImage.src = \"\";\n        modalText.innerHTML = \"\";\n        modalImage.style = \"\";\n        // prevLink.removeEventListener(\"click\", MM.handlePopulateModal);\n        // nextLink.removeEventListener(\"click\", MM.handlePopulateModal);\n      },\n\n      closeModal: () => {\n        const modalWindow = document.querySelector(\"#modal-window\");\n        const modalClose = document.querySelector(\"#modal-close\");\n        const modalImage = document.querySelector('#modal-image');\n        const modalText = document.querySelector('#modal-text');\n        const prevLink = document.querySelector(\"#modal-prev\");\n        const nextLink = document.querySelector(\"#modal-next\");\n        if (modalClose) {\n          modalClose.addEventListener(\"click\", e => {\n            e.preventDefault();\n            modalWindow.classList.remove(\"active\");\n            MM.clearModal(modalImage, modalText, prevLink, nextLink);\n          });\n        }\n      },\n\n      modalInit: () => {\n        MM.modalMadness();\n        MM.closeModal();\n      },\n\n\n      // ensure popup images shrink if window does\n      // watchResize: () => {\n      //   window.addEventListener('resize', () => {\n      //     MM.adjustImageSizes();\n      //   })\n      // }\n    // END POPUPS & GALLERIES\n}\n\n\nmodule.exports = MM;\n"],"sourceRoot":""}